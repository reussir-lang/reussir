// RUN: %reussir-elab --mode semi %s
// RUN: %reussir-elab --mode full %s | %FileCheck %s

// CHECK-DAG: enum _RIC6OptionlE (aka Option<i32>){
// CHECK-NEXT-DAG: _RINvC6Option4SomelE,
// CHECK-NEXT-DAG: _RINvC6Option4NonelE
// CHECK-NEXT-DAG: }

// CHECK-DAG: enum_variant _RINvC6Option4SomelE (aka Option::Some<i32>)(i32)

// CHECK-DAG: enum _RIC8RcOptionlE (aka RcOption<i32>){
// CHECK-NEXT-DAG: _RINvC8RcOption4SomelE,
// CHECK-NEXT-DAG: _RINvC8RcOption4NonelE
// CHECK-NEXT-DAG: }

// CHECK-DAG: enum_variant _RINvC6Option4NonelE (aka Option::None<i32>)()

// CHECK-DAG: enum_variant _RINvC8RcOption4SomelE (aka RcOption::Some<i32>)(i32)

// CHECK-DAG: enum_variant _RINvC8RcOption4NonelE (aka RcOption::None<i32>)()

// CHECK-DAG: fn _RC3baz() -> Rc<_RIC8RcOptionlE, Shared> {
// CHECK-NEXT-DAG: rc_wrap(variant[0](compound(1.0 : i32) : _RINvC8RcOption4SomelE) : _RIC8RcOptionlE) : Rc<_RIC8RcOptionlE, Shared>
// CHECK-NEXT-DAG: }

// CHECK-DAG: fn _RC3foo() -> _RIC6OptionlE {
// CHECK-NEXT-DAG: variant[1](compound() : _RINvC6Option4NonelE) : _RIC6OptionlE
// CHECK-NEXT-DAG: }

// CHECK-DAG: fn _RC3bar() -> Rc<_RIC8RcOptionlE, Shared> {
// CHECK-NEXT-DAG: rc_wrap(variant[1](compound() : _RINvC8RcOption4NonelE) : _RIC8RcOptionlE) : Rc<_RIC8RcOptionlE, Shared>
// CHECK-NEXT-DAG: }
enum [value] Option<T> {
    Some(T),
    None
}

fn foo() -> Option<i32> {
    Option::None{}
}

enum RcOption<T> {
    Some(T),
    None
}

fn bar() -> RcOption<i32> {
    RcOption::None{}
}

fn baz() -> RcOption<i32> {
    RcOption::Some {1}
}
