name: Miri Tests - reussir-rt

on:
  push:
    branches: [ main ]
    paths:
      - 'runtime/**'
  pull_request:
    branches: [ main ]
    paths:
      - 'runtime/**'
  # schedule:
  #   # Run daily at 2 AM UTC
  #   - cron: '0 2 * * *'

env:
  CARGO_TERM_COLOR: always

jobs:
  miri-test:
    name: Miri Test (reussir-rt)
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install Rust toolchain
      uses: dtolnay/rust-toolchain@master
      with:
        toolchain: nightly-2025-12-01
        components: rust-src, rustfmt, clippy, rustc-dev, llvm-tools-preview, miri

    - name: Run Miri tests on reussir-rt
      run: |
        cd runtime
        cargo miri test -p reussir-rt
